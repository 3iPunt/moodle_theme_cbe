{"version":3,"sources":["../src/createfilenc.js"],"names":["define","$","Ajax","REGION","CREATE_FILE_NC","BODY_NC","IFRAME_NC","ERROR_NC","ACTION","CREATE_BUTTON","CONTRACT_BUTTON","SERVICES","NC_CREATEFILE","Createfilenc","node","find","on","onCreateClick","bind","onContractClick","prototype","hide","show","request","methodname","args","call","done","response","success","attr","link","text","error","fail","Notification","exception","initCreatefilenc"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n *\n * @author  2021 3iPunt <https://www.tresipunt.com/>\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/* eslint-disable no-unused-vars */\n/* eslint-disable no-console */\n\ndefine([\n        'jquery',\n        'core/ajax',\n    ], function ($,Ajax) {\n        \"use strict\";\n\n        /**\n         *\n         */\n        let REGION = {\n            CREATE_FILE_NC: '#create_file_nextcloud',\n            BODY_NC: '#create_file_nextcloud_body',\n            IFRAME_NC: '#create_file_nextcloud_iframe',\n            ERROR_NC: '#nextcloud_error'\n        };\n\n        /**\n         *\n         */\n        let ACTION = {\n            CREATE_BUTTON: '[data-action=\"create_file_nextcloud\"]',\n            CONTRACT_BUTTON: '[data-action=\"create_file_nextcloud_contract\"]'\n        };\n\n        /**\n         *\n         */\n        let SERVICES = {\n            NC_CREATEFILE: 'theme_cbe_nextcloud_createfile',\n        };\n\n        /**\n         * @constructor\n         */\n        function Createfilenc() {\n            this.node = $(REGION.CREATE_FILE_NC);\n            this.node.find(ACTION.CREATE_BUTTON).on('click', this.onCreateClick.bind(this));\n            this.node.find(ACTION.CONTRACT_BUTTON).on('click', this.onContractClick.bind(this));\n        }\n\n        Createfilenc.prototype.onContractClick = function (e) {\n\n            this.node.find(REGION.BODY_NC).hide();\n            this.node.find(ACTION.CONTRACT_BUTTON).hide();\n            this.node.find(ACTION.CREATE_BUTTON).show();\n            this.node.find(REGION.IFRAME_NC).hide();\n\n        };\n\n        Createfilenc.prototype.onCreateClick = function (e) {\n\n            this.node.find(REGION.BODY_NC).show();\n            this.node.find(ACTION.CONTRACT_BUTTON).show();\n            this.node.find(ACTION.CREATE_BUTTON).hide();\n            this.node.find(REGION.ERROR_NC).hide();\n\n            let node = this.node;\n\n\n            const request = {\n                methodname: SERVICES.NC_CREATEFILE,\n                args: {}\n            };\n\n            Ajax.call([request])[0].done(function(response) {\n                if (response.success) {\n                    node.find(REGION.IFRAME_NC).show();\n                    node.find(REGION.IFRAME_NC).attr('src', response.link);\n                } else {\n                    node.find(REGION.IFRAME_NC).hide();\n                    node.find(REGION.ERROR_NC).show();\n                    node.find(REGION.ERROR_NC).text(response.error);\n                }\n            }).fail(Notification.exception);\n\n        };\n\n        /** @type {jQuery} The jQuery node for the region. */\n        Createfilenc.prototype.node = null;\n\n        return {\n            /**\n             *\n             * @return {Createfilenc}\n             */\n            initCreatefilenc: function () {\n                return new Createfilenc();\n            }\n        };\n    }\n);"],"file":"createfilenc.min.js"}