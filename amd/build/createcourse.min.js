define ("theme_cbe/createcourse",["jquery","core/str","core/ajax","core/templates"],function(a,b,c){"use strict";var e={CREATE_BUTTON:"[data-action=\"create\"]"},f={ALL_INPUTS:".validation-input",FULLNAME_INPUT:"#fullname",SHORTNAME_INPUT:"#shortname",CATEGORY_SELECT:"#category",VISIBLE_CHECK:"#visible"},g={SHORTNAME:"[data-msg=\"msg-shortname\"]"},h={FULLNAME_OK:"#verify-fullname .fa-check-circle-o",FULLNAME_KO:"#verify-fullname .fa-times-circle-o",SHORTNAME_OK:"#verify-shortname .fa-check-circle-o",SHORTNAME_KO:"#verify-shortname .fa-times-circle-o"},i={CREATE_COURSE:"theme_cbe_create_course",CHECK_COURSE_SHORTNAME:"theme_cbe_check_course_shortname"},j={fullname:!1,shortname:!1};function d(b){this.node=a(b);this.fullname=f.FULLNAME_INPUT;this.shortname=f.SHORTNAME_INPUT;this.all_inputs=f.ALL_INPUTS;this.node.find(this.fullname).on("keyup",this.onFullnameChange.bind(this));this.node.find(this.shortname).on("focusout",this.onShortnameFocusOut.bind(this));this.node.find(this.all_inputs).on("focusout",this.onAllInputsFocusOut.bind(this));this.node.find(e.CREATE_BUTTON).on("click",this.onCreateCourseButtonClick.bind(this))}d.prototype.onAllInputsFocusOut=function(){if(j.fullname&&j.shortname){a(e.CREATE_BUTTON).prop("disabled",!1)}else{a(e.CREATE_BUTTON).prop("disabled",!0)}};d.prototype.onFullnameChange=function(){if(""!==this.node.find(this.fullname).val().trim()){j.fullname=!0;a(h.FULLNAME_OK).show();a(h.FULLNAME_KO).hide()}else{j.fullname=!1;a(h.FULLNAME_KO).show();a(h.FULLNAME_OK).hide()}};d.prototype.onShortnameFocusOut=function(){var b=a(f.SHORTNAME_INPUT).val().trim();if(""!==this.node.find(this.shortname).val().trim()){var d={methodname:i.CHECK_COURSE_SHORTNAME,args:{shortname:b}};c.call([d])[0].done(function(b){if(b.exist){j.shortname=!1;a(g.SHORTNAME).text(b.msg);a(h.SHORTNAME_KO).show();a(h.SHORTNAME_OK).hide()}else{a(h.SHORTNAME_OK).show();a(h.SHORTNAME_KO).hide();a(g.SHORTNAME).text("");j.shortname=!0}}).fail(Notification.exception)}else{j.shortname=!1}};d.prototype.onCreateCourseButtonClick=function(){a(e.CREATE_BUTTON).prop("disabled",!0);var b=a(f.FULLNAME_INPUT).val().trim(),d=a(f.SHORTNAME_INPUT).val().trim(),g=a(f.CATEGORY_SELECT).val(),h=a(f.VISIBLE_CHECK).is(":checked"),j={methodname:i.CREATE_COURSE,args:{fullname:b,shortname:d,category:g,visible:h}};c.call([j])[0].done(function(a){if(a.success){location.href=a.redirect}else{alert(a.error)}}).fail(Notification.exception)};d.prototype.node=null;return{initCreateCourse:function initCreateCourse(a){return new d(a)}}});
//# sourceMappingURL=createcourse.min.js.map
