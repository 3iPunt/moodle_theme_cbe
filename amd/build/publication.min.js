/**
 *
 * @author  2021 3iPunt <https://www.tresipunt.com/>
 * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("theme_cbe/publication",["jquery","core/str","core/ajax","core/templates"],(function($,Str,Ajax,Templates){var ACTION_PUBLICATION_BUTTON='[data-action="publicate"]',ACTION_ALUMN_SELECT='[data-action="alumn"]',ACTION_GROUP_SELECT='[data-action="group"]',TEXT_COMMENT_TEXT='[data-text="comment"]',SERVICES_MODULE_PUBLICATION="theme_cbe_publication";function Publication(region,courseId){this.courseid=courseId,this.node=$(region),this.node.find(ACTION_ALUMN_SELECT).on("change",this.onAlumnSelectChange.bind(this)),this.node.find(ACTION_GROUP_SELECT).on("change",this.onGroupSelectChange.bind(this)),this.node.find(TEXT_COMMENT_TEXT).on("keyup",this.onCommentTextKeyUp.bind(this)),this.node.find(ACTION_PUBLICATION_BUTTON).on("click",this.onPublicationButtonClick.bind(this))}return Publication.prototype.onCommentTextKeyUp=function(e){""!==this.node.find(TEXT_COMMENT_TEXT).val().trim()?$(ACTION_PUBLICATION_BUTTON).prop("disabled",!1):$(ACTION_PUBLICATION_BUTTON).prop("disabled",!0)},Publication.prototype.onAlumnSelectChange=function(e){this.node.find(ACTION_GROUP_SELECT).val(0)},Publication.prototype.onGroupSelectChange=function(e){this.node.find(ACTION_ALUMN_SELECT).val(0)},Publication.prototype.onPublicationButtonClick=function(e){$(ACTION_PUBLICATION_BUTTON).prop("disabled",!0);var comment=$(TEXT_COMMENT_TEXT).val(),student=this.node.find(ACTION_ALUMN_SELECT).val(),group=this.node.find(ACTION_GROUP_SELECT).val(),mode="all",item=0;student>0&&(mode="student",item=parseInt(student)),group>0&&(mode="group",item=parseInt(group));var request={methodname:SERVICES_MODULE_PUBLICATION,args:{course_id:this.courseid,comment:comment,mode:mode,item:item}};Ajax.call([request])[0].done((function(response){location.reload()})).fail(Notification.exception)},Publication.prototype.node=null,{initPublication:function(region,courseId){return new Publication(region,courseId)}}}));

//# sourceMappingURL=publication.min.js.map