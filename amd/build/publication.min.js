define ("theme_cbe/publication",["jquery","core/str","core/ajax","core/templates"],function(a,b,c){"use strict";var e={PUBLICATION_BUTTON:"[data-action=\"publicate\"]",ALUMN_SELECT:"[data-action=\"alumn\"]",GROUP_SELECT:"[data-action=\"group\"]"},f={COMMENT_TEXT:"[data-text=\"comment\"]"},g={MODULE_PUBLICATION:"theme_cbe_publication"};function d(b,c){this.courseid=c;this.node=a(b);this.node.find(e.ALUMN_SELECT).on("change",this.onAlumnSelectChange.bind(this));this.node.find(e.GROUP_SELECT).on("change",this.onGroupSelectChange.bind(this));this.node.find(e.PUBLICATION_BUTTON).on("click",this.onPublicationButtonClick.bind(this))}d.prototype.onAlumnSelectChange=function(){this.node.find(e.GROUP_SELECT).val(0)};d.prototype.onGroupSelectChange=function(){this.node.find(e.ALUMN_SELECT).val(0)};d.prototype.onPublicationButtonClick=function(){a(e.PUBLICATION_BUTTON).prop("disabled",!0);var b=a(f.COMMENT_TEXT).val(),d=this.node.find(e.ALUMN_SELECT).val(),h=this.node.find(e.GROUP_SELECT).val(),i="all",j=0;if(0<d){i="student";j=parseInt(d)}if(0<h){i="group";j=parseInt(h)}var k={methodname:g.MODULE_PUBLICATION,args:{course_id:this.courseid,comment:b,mode:i,item:j}};c.call([k])[0].done(function(){location.reload()}).fail(Notification.exception)};d.prototype.node=null;return{initPublication:function initPublication(a,b){return new d(a,b)}}});
//# sourceMappingURL=publication.min.js.map
