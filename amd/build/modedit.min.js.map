{"version":3,"sources":["../src/modedit.js"],"names":["define","$","BUTTONS","SUBMIT_1","SUBMIT_2","REGIONS","ALERTS","ALERT_CBE","Modedit","$create_file_nextcloud","$fitem_id_introattachments","$fitem_id_files","length","prependTo","mform","alertRestriction","find","on","bind","alertRestrictionName","prototype","alerts","alert_is_visible","each","$this","text","trim","$alert","removeClass","$name","val","node","initModedit"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @package theme_cbe\n * @author  2021 3iPunt <https://www.tresipunt.com/>\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/* eslint-disable no-unused-vars */\n/* eslint-disable no-console */\n\ndefine([\n        'jquery',\n    ], function ($) {\n        \"use strict\";\n\n        let BUTTONS = {\n            SUBMIT_1 : '#id_submitbutton',\n            SUBMIT_2 : '#id_submitbutton2',\n        };\n\n        let REGIONS = {\n            ALERTS: '.form-control-feedback',\n            ALERT_CBE: '#alert-cbe-modedit',\n        };\n\n        /**\n         * @constructor\n         */\n        function Modedit() {\n            let $create_file_nextcloud = $('#create_file_nextcloud');\n            let $fitem_id_introattachments = $('#fitem_id_introattachments');\n            let $fitem_id_files = $('#fitem_id_files');\n            if ( $fitem_id_introattachments.length > 0 ) {\n                $create_file_nextcloud.prependTo('#fitem_id_introattachments');\n            } else if ($fitem_id_files.length > 0) {\n                $create_file_nextcloud.prependTo('#fitem_id_files');\n            }\n            let mform = $('.mform');\n            this.alertRestriction();\n            mform.find(BUTTONS.SUBMIT_1).on('click', this.alertRestriction.bind(this));\n            mform.find(BUTTONS.SUBMIT_2).on('click', this.alertRestriction.bind(this));\n            mform.find(BUTTONS.SUBMIT_1).on('click', this.alertRestrictionName.bind(this));\n            mform.find(BUTTONS.SUBMIT_2).on('click', this.alertRestrictionName.bind(this));\n        }\n\n        Modedit.prototype.alertRestriction = function (e) {\n            let mform = $('.mform');\n            let alerts = mform.find(REGIONS.ALERTS);\n            let alert_is_visible = false;\n            alerts.each(function(){\n                let $this = $(this);\n                let text = $.trim($this.text());\n                if (text !== '') {\n                    alert_is_visible = true;\n                }\n            });\n            if (alert_is_visible) {\n                let $alert = $(REGIONS.ALERT_CBE);\n                $alert.removeClass('hidden');\n            }\n        };\n\n        Modedit.prototype.alertRestrictionName = function (e) {\n            let alert_is_visible = false;\n            let mform = $('.mform');\n            let $name = mform.find('#id_name');\n            if ($name.val() === '') {\n                alert_is_visible = true;\n            }\n            if (alert_is_visible) {\n                let $alert = $(REGIONS.ALERT_CBE);\n                $alert.removeClass('hidden');\n            }\n        };\n\n        /** @type {jQuery} The jQuery node for the region. */\n        Modedit.prototype.node = null;\n\n        return {\n            /**\n             *\n             * @return {Modedit}\n             */\n            initModedit: function () {\n                return new Modedit();\n            }\n        };\n    }\n);"],"file":"modedit.min.js"}