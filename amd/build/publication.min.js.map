{"version":3,"sources":["../src/publication.js"],"names":["define","$","Str","Ajax","ACTION","PUBLICATION_BUTTON","TEXT","COMMENT_TEXT","SERVICES","MODULE_PUBLICATION","Publication","region","courseId","courseid","node","find","on","onPublicationButtonClick","bind","prototype","comment","val","request","methodname","args","course_id","call","done","location","reload","fail","Notification","exception","initPublication"],"mappings":"AAwBAA,OAAM,yBAAC,CACC,QADD,CAEC,UAFD,CAGC,WAHD,CAIC,gBAJD,CAAD,CAKC,SAAUC,CAAV,CAAaC,CAAb,CAAkBC,CAAlB,CAAmC,CAClC,aADkC,GAM9BC,CAAAA,CAAM,CAAG,CACTC,kBAAkB,CAAE,6BADX,CANqB,CAU9BC,CAAI,CAAG,CACPC,YAAY,CAAE,yBADP,CAVuB,CAiB9BC,CAAQ,CAAG,CACXC,kBAAkB,CAAE,uBADT,CAjBmB,CA0BlC,QAASC,CAAAA,CAAT,CAAqBC,CAArB,CAA6BC,CAA7B,CAAuC,CACnC,KAAKC,QAAL,CAAgBD,CAAhB,CACA,KAAKE,IAAL,CAAYb,CAAC,CAACU,CAAD,CAAb,CACA,KAAKG,IAAL,CAAUC,IAAV,CAAeX,CAAM,CAACC,kBAAtB,EAA0CW,EAA1C,CAA6C,OAA7C,CAAsD,KAAKC,wBAAL,CAA8BC,IAA9B,CAAmC,IAAnC,CAAtD,CACH,CAEDR,CAAW,CAACS,SAAZ,CAAsBF,wBAAtB,CAAiD,UAAa,IACtDG,CAAAA,CAAO,CAAGnB,CAAC,CAACK,CAAI,CAACC,YAAN,CAAD,CAAqBc,GAArB,EAD4C,CAEtDC,CAAO,CAAG,CACVC,UAAU,CAAEf,CAAQ,CAACC,kBADX,CAEVe,IAAI,CAAE,CACFC,SAAS,CAAE,KAAKZ,QADd,CAEFO,OAAO,CAAEA,CAFP,CAFI,CAF4C,CAS1DjB,CAAI,CAACuB,IAAL,CAAU,CAACJ,CAAD,CAAV,EAAqB,CAArB,EAAwBK,IAAxB,CAA6B,UAAmB,CAC5CC,QAAQ,CAACC,MAAT,EACH,CAFD,EAEGC,IAFH,CAEQC,YAAY,CAACC,SAFrB,CAGH,CAZD,CAeAtB,CAAW,CAACS,SAAZ,CAAsBL,IAAtB,CAA6B,IAA7B,CAEA,MAAO,CAMHmB,eAAe,CAAE,yBAAUtB,CAAV,CAAkBC,CAAlB,CAA4B,CACzC,MAAO,IAAIF,CAAAA,CAAJ,CAAgBC,CAAhB,CAAwBC,CAAxB,CACV,CARE,CAUV,CAhEC,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @package theme_cbe\n * @author  2021 3iPunt <https://www.tresipunt.com/>\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/* eslint-disable no-unused-vars */\n/* eslint-disable no-console */\n\ndefine([\n        'jquery',\n        'core/str',\n        'core/ajax',\n        'core/templates'\n    ], function ($, Str, Ajax, Templates) {\n        \"use strict\";\n\n        /**\n         *\n         */\n        let ACTION = {\n            PUBLICATION_BUTTON: '[data-action=\"publicate\"]',\n        };\n\n        let TEXT = {\n            COMMENT_TEXT: '[data-text=\"comment\"]',\n        };\n\n        /**\n         *\n         */\n        let SERVICES = {\n            MODULE_PUBLICATION: 'theme_cbe_publication'\n        };\n\n        /**\n         * @constructor\n         * @param {String} region\n         * @param {Number} courseId\n         */\n        function Publication(region, courseId) {\n            this.courseid = courseId;\n            this.node = $(region);\n            this.node.find(ACTION.PUBLICATION_BUTTON).on('click', this.onPublicationButtonClick.bind(this));\n        }\n\n        Publication.prototype.onPublicationButtonClick = function (e) {\n            var comment = $(TEXT.COMMENT_TEXT).val();\n            var request = {\n                methodname: SERVICES.MODULE_PUBLICATION,\n                args: {\n                    course_id: this.courseid,\n                    comment: comment\n                }\n            };\n            Ajax.call([request])[0].done(function(response) {\n                location.reload();\n            }).fail(Notification.exception);\n        };\n\n        /** @type {jQuery} The jQuery node for the region. */\n        Publication.prototype.node = null;\n\n        return {\n            /**\n             * @param {String} region\n             * @param {Number} courseId\n             * @return {Publication}\n             */\n            initPublication: function (region, courseId) {\n                return new Publication(region, courseId);\n            }\n        };\n    }\n);"],"file":"publication.min.js"}