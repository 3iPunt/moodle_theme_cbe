define ("theme_cbe/comment_send",["jquery","core/str","core/ajax","core/templates"],function(a,b,c){"use strict";var e={SEND_BUTTON:"[data-action=\"send-comment\"]"},f={SEND_TEXT:"[data-text=\"comment\"]"},g={PUBLICATION_SEND:"theme_cbe_publication_comment_send"};function d(b,c){this.cmid=c;this.node=a(b);this.node.find(f.SEND_TEXT).on("keyup",this.onTextChange.bind(this));this.node.find(e.SEND_BUTTON).on("click",this.onSendButtonClick.bind(this))}d.prototype.onTextChange=function(){if(""!==this.node.find(f.SEND_TEXT).val().trim()){this.node.find(e.SEND_BUTTON).show()}else{this.node.find(e.SEND_BUTTON).hide()}};d.prototype.onSendButtonClick=function(){var a=this.node.find(f.SEND_TEXT).val();this.node.find(e.SEND_BUTTON).hide();var b={methodname:g.PUBLICATION_SEND,args:{cmid:this.cmid,comment:a}};c.call([b])[0].done(function(){location.reload()}).fail(Notification.exception)};d.prototype.node=null;return{initCommentSend:function initCommentSend(a,b){return new d(a,b)}}});
//# sourceMappingURL=comment_send.min.js.map
