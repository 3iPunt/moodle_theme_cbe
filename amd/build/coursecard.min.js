/**
 *
 * @author 2021 3iPunt <https://www.tresipunt.com/>
 * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("theme_cbe/coursecard",["jquery","core/str","core/ajax","core/templates"],(function($,Str,Ajax,Templates){var SERVICES_COURSECARD_EXTRA="theme_cbe_coursecard_extra",SERVICES_COURSECARD_TEACHERS="theme_cbe_coursecard_teachers",TEMPLATES_COURSECARD_FOOTER="theme_cbe/coursecard_footer",TEMPLATES_COURSECARD_TEACHERS="theme_cbe/coursecard_teachers",TEMPLATES_LOADING="core/overlay_loading";function CourseCard(region,courseId){var identifierfooter=$('[data-role="user"] [data-region="coursecard-footer-'+courseId+'"]'),identifierteachers=$('[data-role="user"] [data-region="coursecard-teachers-'+courseId+'"]'),identifiercourse=$('[data-role="user"] [data-region="course-content"][data-course-id="'+courseId+'"]');Templates.render(TEMPLATES_LOADING,{visible:!0}).done((function(html){var request_footer={methodname:SERVICES_COURSECARD_EXTRA,args:{course_id:courseId}};Ajax.call([request_footer])[0].done((function(response){var template=TEMPLATES_COURSECARD_FOOTER,view_url=response.view_url;identifiercourse.find('a[href*="/course/"]').each((function(){$(this).attr("href").includes("/course/")&&$(this).attr("href",view_url)})),Templates.render(template,response).done((function(html,js){identifierfooter.html(html),Templates.runTemplateJS(js)}))})).fail(Notification.exception);var request_teachers={methodname:SERVICES_COURSECARD_TEACHERS,args:{course_id:courseId}};Ajax.call([request_teachers])[0].done((function(response){var template=TEMPLATES_COURSECARD_TEACHERS;Templates.render(template,response).done((function(html,js){identifierteachers.html(html),Templates.runTemplateJS(js)}))})).fail(Notification.exception)}))}return CourseCard.prototype.node=null,{initCourseCard:function(region,courseId){return new CourseCard(region,courseId)}}}));

//# sourceMappingURL=coursecard.min.js.map